.card {
    display: inline-block;
    margin: 0px 12px;
    --radius: 4.55% / 3.5%;
    z-index: calc(var(--s) * 100);
    transform: translate3d(0, 0, 0.1px);
    will-change: transform, visibility;
    transform-style: preserve-3d;

    width: 90px;
    height: 128px;

    //   .card__rotator {
    //     transition: transform .3s ease-in-out,
    //         box-shadow 0.4s ease,
    //         outline 0.2s ease;
    //   }

    .card-title {
        font-variant: all-small-caps;
        color: #FFF;
        text-align: center;
        font-size: 130%;
        margin-bottom: 6px;
    }
}

.card img {
    width: 100%;
    height: 100%;
}

.card__rotator * {
    pointer-events: none;
}

.card.interacting {
    z-index: calc(var(--s) * 120);
}

.card.active .card__translater,
.card.active .card__rotator {
    touch-action: none;
}

.card__translater,
.card__rotator {
    display: grid;
    perspective: 600px;
    transform-origin: center;
    will-change: transform;
}

.card__translater {
    width: auto;
    position: relative;
    transform: translate3d(var(--tx), var(--ty), 0) scale(var(--s));
}

.card__rotator {
    --glow: #69d1e9;
    transform: rotateY(var(--rx)) rotateX(var(--ry));
    transform-style: preserve-3d;
    box-shadow: 0px 10px 10px -5px #00000033;
    border-radius: var(--radius);
    outline: none;
    transition: box-shadow 0.4s ease, outline 0.2s ease;
}

.card.active .card__rotator {
    box-shadow: 0 0 10px 0px var(--glow), 0 0 10px 0px var(--glow), 0 0 30px 0px var(--glow);
}

.card__rotator:focus {
    box-shadow: 0 0 10px 0px var(--glow), 0 0 10px 0px var(--glow), 0 0 30px 0px var(--glow);
}

.card.active .card__rotator:focus {
    box-shadow: 0px 10px 30px 3px black;
}

.card__rotator :global(*) {
    width: 100%;
    display: grid;
    grid-area: 1/1;
    border-radius: var(--radius);
    image-rendering: optimizeQuality;
    transform-style: preserve-3d;
}

.card__back {
    transform: rotateY(180deg);
    backface-visibility: visible;
}

.card__front,
.card__front * {
    backface-visibility: hidden;
}

.card__front {
    opacity: 1;
    transition: opacity .2s ease-out;
}

.loading .card__front {
    opacity: 0;
}

.loading .card__back {
    transform: rotateY(0deg);
}

/* Shine */
.card__shine {
    display: grid;
    overflow: hidden;
    transform: translateZ(1px);
    background: transparent;
    z-index: 3;
    mix-blend-mode: color-dodge;
    filter: brightness(.85) contrast(2.75) saturate(.65);
    background-size: cover;
    background-position: center;
    opacity: var(--o);
}

.card__shine:after {
    grid-area: 1/1;
}


/* Glare */

.card__glare {
    transform: translateZ(1px);
    z-index: 4;
    background: radial-gradient(farthest-corner circle at var(--mx) var(--my),
            rgba(255, 255, 255, 0.8) 10%,
            rgba(255, 255, 255, 0.65) 20%,
            rgba(0, 0, 0, 0.5) 90%);
    mix-blend-mode: overlay;
    opacity: var(--o);
}

.card__glare.holo:not(.v):not(.vmax):not(.vstar) {
    opacity: calc(var(--o)*.8);
    filter: brightness(0.8) contrast(1.5);
}

.card__glare.v,
.card__glare.vfull,
.card__glare.vmax,
.card__glare.vstar {
    filter: brightness(.9) contrast(1.75);
    background:
        radial-gradient(farthest-corner circle at var(--mx) var(--my),
            rgb(255, 255, 255) 0%,
            rgba(133, 137, 141, .33) 45%,
            rgba(100, 100, 100, .65) 120%);
    opacity: calc(var(--o)*.66);
}


.card__glare.vmax {
    background:
        radial-gradient(farthest-corner circle at var(--mx) var(--my),
            rgba(255, 255, 255, 0.75) 0%,
            rgba(99, 99, 99, 0.35) 45%,
            rgba(0, 0, 0, 1) 120%);
}

/* TODO */
:global(.card[data-rarity="rare holo"][data-gallery="true"]) .card__glare {
    background: radial-gradient(farthest-corner circle at var(--mx) var(--my),
            rgba(255, 255, 255, 0.8) 10%,
            rgba(255, 255, 255, 0.65) 20%,
            rgba(0, 0, 0, 1) 90%);
}
